const sportPitanje = [
  {
    pitanje: "Who directed the movie 'Inception'?",
    odg: ["Christopher Nolan", "Steven Spielberg", "James Cameron", "Quentin Tarantino"],
    tocno: 0
  },
  {
    pitanje: "Which movie features a character named Jack Dawson?",
    odg: ["Titanic", "The Great Gatsby", "Inception", "The Notebook"],
    tocno: 0
  },
  {
    pitanje: "Which actor played the Joker in 'The Dark Knight' (2008)?",
    odg: ["Joaquin Phoenix", "Heath Ledger", "Jared Leto", "Jack Nicholson"],
    tocno: 1
  },
  {
    pitanje: "In which year was the original 'Jurassic Park' released?",
    odg: ["1990", "1993", "1996", "1999"],
    tocno: 1
  },
  {
    pitanje: "What is the name of the hobbit played by Elijah Wood?",
    odg: ["Bilbo Baggins", "Samwise Gamgee", "Frodo Baggins", "Pippin Took"],
    tocno: 2
  },
  {
    pitanje: "Which movie won Best Picture at the 2020 Oscars?",
    odg: ["Joker", "1917", "Parasite", "Once Upon a Time in Hollywood"],
    tocno: 2
  },
  {
    pitanje: "Which actress played Katniss Everdeen in 'The Hunger Games'?",
    odg: ["Emma Watson", "Jennifer Lawrence", "Kristen Stewart", "Scarlett Johansson"],
    tocno: 1
  },
  {
    pitanje: "What’s the highest-grossing film of all time (as of 2024)?",
    odg: ["Avatar", "Avengers: Endgame", "Titanic", "The Lion King"],
    tocno: 1
  },
  {
    pitanje: "Which film series features a character named Dominic Toretto?",
    odg: ["Mission: Impossible", "The Fast and the Furious", "Transformers", "John Wick"],
    tocno: 1
  },
  {
    pitanje: "Who directed 'Pulp Fiction'?",
    odg: ["Martin Scorsese", "Quentin Tarantino", "Francis Ford Coppola", "Ridley Scott"],
    tocno: 1
  },
  {
    pitanje: "Who directed the movie 'Gladiator'?",
    odg: ["James Cameron", "Ridley Scott", "Peter Jackson", "Steven Spielberg"],
    tocno: 1
  },
  {
    pitanje: "Which actor starred in the movie 'Forrest Gump'?",
    odg: ["Morgan Freeman", "Tom Hanks", "Leonardo DiCaprio", "Brad Pitt"],
    tocno: 1
  },
  {
    pitanje: "In which year was the movie 'Interstellar' released?",
    odg: ["2003", "2014", "1994", "2010"],
    tocno: 1
  },
  {
    pitanje: "Who directed the movie 'Forrest Gump'?",
    odg: ["James Cameron", "Robert Zemeckis", "Martin Scorsese", "Steven Spielberg"],
    tocno: 1
  },
  {
    pitanje: "Who directed the movie 'Interstellar'?",
    odg: ["Peter Jackson", "Christopher Nolan", "James Cameron", "Ridley Scott"],
    tocno: 1
  },
  {
    pitanje: "Which actor starred in the movie 'Gladiator'?",
    odg: ["Brad Pitt", "Russell Crowe", "Robert De Niro", "Tom Hanks"],
    tocno: 1
  },
  {
    pitanje: "Which actor starred in the movie 'The Godfather'?",
    odg: ["Tom Hanks", "Robert De Niro", "Marlon Brando", "Al Pacino"],
    tocno: 3
  },
  {
    pitanje: "Which actor starred in the movie 'The Shawshank Redemption'?",
    odg: ["Brad Pitt", "Morgan Freeman", "Robert De Niro", "Tom Hanks"],
    tocno: 1
  },
  {
    pitanje: "Who directed the movie 'The Godfather'?",
    odg: ["Francis Ford Coppola", "Martin Scorsese", "Peter Jackson", "James Cameron"],
    tocno: 0
  },
  {
    pitanje: "In which year was the movie 'The Shawshank Redemption' released?",
    odg: ["1994", "2014", "1997", "2001"],
    tocno: 0
  },
  {
    pitanje: "Which actor starred in the movie 'Fight Club'?",
    odg: ["Edward Norton", "Brad Pitt", "Jared Leto", "Johnny Depp"],
    tocno: 1
  },
  {
    pitanje: "Who directed the movie 'Fight Club'?",
    odg: ["David Fincher", "James Cameron", "Steven Spielberg", "Martin Scorsese"],
    tocno: 0
  },
  {
    pitanje: "In which year was the movie 'Fight Club' released?",
    odg: ["1999", "1995", "2003", "2010"],
    tocno: 0
  },
  {
    pitanje: "Which actor played Neo in 'The Matrix'?",
    odg: ["Keanu Reeves", "Brad Pitt", "Johnny Depp", "Matt Damon"],
    tocno: 0
  },
  {
    pitanje: "Who directed the 'Lord of the Rings' trilogy?",
    odg: ["Peter Jackson", "James Cameron", "George Lucas", "Steven Spielberg"],
    tocno: 0
  },
  {
    pitanje: "Which movie features the quote 'Here's looking at you, kid'?",
    odg: ["Casablanca", "Gone with the Wind", "The Godfather", "Titanic"],
    tocno: 0
  },
  {
    pitanje: "Which movie features the character Andy Dufresne?",
    odg: ["The Green Mile", "The Shawshank Redemption", "Forrest Gump", "Cast Away"],
    tocno: 1
  },
  {
    pitanje: "Which actor played Forrest Gump?",
    odg: ["Tom Hanks", "Robin Williams", "Matt Damon", "Kevin Spacey"],
    tocno: 0
  },
  {
    pitanje: "What is the name of the fictional African country in 'Black Panther'?",
    odg: ["Wakanda", "Zamunda", "Genosha", "Latveria"],
    tocno: 0
  },
  {
    pitanje: "Which movie has the line 'I see dead people'?",
    odg: ["The Sixth Sense", "The Others", "Insidious", "The Ring"],
    tocno: 0
  },
  {
    pitanje: "Which film did Leonardo DiCaprio finally win an Oscar for?",
    odg: ["The Revenant", "Titanic", "Inception", "The Wolf of Wall Street"],
    tocno: 0
  },
  {
    pitanje: "Who played Iron Man in the Marvel Cinematic Universe?",
    odg: ["Chris Evans", "Chris Hemsworth", "Robert Downey Jr.", "Mark Ruffalo"],
    tocno: 2
  },
  {
    pitanje: "Which movie is famous for the quote 'Why so serious?'",
    odg: ["The Dark Knight", "Joker", "Batman Begins", "Suicide Squad"],
    tocno: 0
  },
  {
    pitanje: "What kind of creature is Shrek?",
    odg: ["Ogre", "Troll", "Goblin", "Giant"],
    tocno: 0
  },
  {
    pitanje: "Which 1999 sci-fi film was directed by the Wachowskis?",
    odg: ["The Matrix", "Dark City", "Equilibrium", "Minority Report"],
    tocno: 0
  },
  {
    pitanje: "Who voices Woody in the 'Toy Story' movies?",
    odg: ["Tim Allen", "Tom Hanks", "Billy Crystal", "Robin Williams"],
    tocno: 1
  },
  {
    pitanje: "Which movie involves dreams within dreams?",
    odg: ["Inception", "Shutter Island", "The Matrix", "Fight Club"],
    tocno: 0
  },
  {
    pitanje: "What’s the name of Harry Potter’s owl?",
    odg: ["Errol", "Pigwidgeon", "Hedwig", "Crookshanks"],
    tocno: 2
  },
  {
    pitanje: "Which actress played Black Widow?",
    odg: ["Gal Gadot", "Scarlett Johansson", "Natalie Portman", "Anne Hathaway"],
    tocno: 1
  },
  {
    pitanje: "Who directed 'Avatar'?",
    odg: ["James Cameron", "Steven Spielberg", "Christopher Nolan", "Peter Jackson"],
    tocno: 0
  },
  {
    pitanje: "Which film is set in a post-apocalyptic desert world?",
    odg: ["Mad Max: Fury Road", "Blade Runner", "The Book of Eli", "The Road"],
    tocno: 0
  },
  {
    pitanje: "Which 2019 movie is a South Korean social thriller?",
    odg: ["Train to Busan", "Parasite", "Oldboy", "Burning"],
    tocno: 1
  },
  {
    pitanje: "Which film franchise features a ring that must be destroyed?",
    odg: ["Harry Potter", "The Hobbit", "Lord of the Rings", "Game of Thrones"],
    tocno: 2
  },
  {
    pitanje: "Which Pixar movie features a cooking rat?",
    odg: ["Ratatouille", "Bolt", "Zootopia", "Up"],
    tocno: 0
  },
  {
    pitanje: "What is the name of the cowboy in Toy Story?",
    odg: ["Buzz", "Woody", "Andy", "Jessie"],
    tocno: 1
  },
  {
    pitanje: "Who directed 'The Grand Budapest Hotel'?",
    odg: ["Wes Anderson", "Quentin Tarantino", "Tim Burton", "Martin Scorsese"],
    tocno: 0
  },
  {
    pitanje: "Which movie has the line 'Life is like a box of chocolates'?",
    odg: ["Forrest Gump", "Cast Away", "Big", "The Terminal"],
    tocno: 0
  }
];

function randomPitanje(polje) {
  for (let i = polje.length - 1; i >= 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [polje[i], polje[j]] = [polje[j], polje[i]];
  }
}

randomPitanje(sportPitanje);

sportPitanje.forEach(q => {
  const tocanOdg = q.odg[q.tocno];
  randomPitanje(q.odg);
  q.tocno = q.odg.indexOf(tocanOdg);
});

let trenPitanje = 0;
let bodovi = 0;

function prikaziPitanje(index) {
  const q = sportPitanje[index];
  const container = document.getElementById('quiz-container');
  container.innerHTML = `
  <h1 style="color:#F59E0B">FILM</h1>
    <h2>${q.pitanje}</h2>
    <ul style="list-style:none; padding:0;">
      ${q.odg.map((ans, i) => 
        `<li style="margin-bottom:10px;">
          <button onclick="provjera(${index}, ${i}, this)" style="padding:10px 20px; border: 1px solid #ccc; cursor: pointer; border-radius: 6px;">${ans}</button>
        </li>`
      ).join('')}
    </ul>
    <div id="score" style="margin-top:16px;font-weight:bold;">Score: ${bodovi}</div>
  `;
}

function provjera(qIndex, odgIndex, btn) {
  const jeTocno = odgIndex === sportPitanje[qIndex].tocno;
  
  if (jeTocno) {
    btn.style.backgroundColor = "#22C55E";
    bodovi++;
  } else {
    btn.style.backgroundColor = "#FF6666";
  }

  const scoreDiv = document.getElementById('score');
  if (scoreDiv) scoreDiv.textContent = `Score: ${bodovi}`;

  document.querySelectorAll('#quiz-container button').forEach(btn => btn.disabled = true);

  setTimeout(() => {
    trenPitanje++;
    if (trenPitanje < 10) {
      prikaziPitanje(trenPitanje);
    } else {
      prikaziKraj();
    }
  }, 1000);
}

window.onload = function() {
  if (document.getElementById('quiz-container')) {
    prikaziPitanje(trenPitanje);
  }
};

let username = "";

document.getElementById('login-form').onsubmit = function(e) {
  e.preventDefault();
  username = document.getElementById('username').value.trim();
  if (username) {
    document.getElementById('login-container').style.display = 'none';
    document.getElementById('quiz-container').style.display = '';
    prikaziPitanje(trenPitanje);
  }
};

function prikaziKraj() {
  const container = document.getElementById('quiz-container');
  container.innerHTML = `<h2>Quiz finished!</h2>
    <div class="prikaziKraj">Your score: ${bodovi}/10</div>`;

  let leaderboard = JSON.parse(localStorage.getItem('leaderboard_film')) || [];
  leaderboard.push({ username, score: bodovi, total: 10});
  localStorage.setItem('leaderboard_film', JSON.stringify(leaderboard));

  setTimeout(() => {
    window.location.href = 'leaderboard.html';
  }, 2000);
}

